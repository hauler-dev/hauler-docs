"use strict";(globalThis.webpackChunkhauler_docs=globalThis.webpackChunkhauler_docs||[]).push([[3639],{2571(e,r,i){i.r(r),i.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"guides-references/rewriting-artifacts","title":"Rewriting Artifacts","description":"Documentation for Rewriting Artifacts","source":"@site/docs/guides-references/rewriting-artifacts.md","sourceDirName":"guides-references","slug":"/guides-references/rewriting-artifacts","permalink":"/docs/next/guides-references/rewriting-artifacts","draft":false,"unlisted":false,"editUrl":"https://github.com/hauler-dev/hauler-docs/edit/main/docs/guides-references/rewriting-artifacts.md","tags":[],"version":"current","frontMatter":{"title":"Rewriting Artifacts","description":"Documentation for Rewriting Artifacts","sidebar_label":"Rewriting Artifacts"},"sidebar":"haulerSidebar","previous":{"title":"Hauler Collections","permalink":"/docs/next/guides-references/hauler-collections"},"next":{"title":"Known Issues/Limits","permalink":"/docs/next/known-limits"}}');var n=i(4848),s=i(8453);const a={title:"Rewriting Artifacts",description:"Documentation for Rewriting Artifacts",sidebar_label:"Rewriting Artifacts"},o="Artifact Rewrite Guide - Hauler v1.4+",c={},l=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Usage",id:"usage",level:2},{value:"Examples",id:"examples",level:2},{value:"Example 1: Rewrite Registry and Repository",id:"example-1-rewrite-registry-and-repository",level:3},{value:"Example 2: Rewrite Tag Only",id:"example-2-rewrite-tag-only",level:3},{value:"Example 3: Complete Rewrite",id:"example-3-complete-rewrite",level:3}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"artifact-rewrite-guide---hauler-v14",children:"Artifact Rewrite Guide - Hauler v1.4+"})}),"\n",(0,n.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.code,{children:"--rewrite"})," flag on ",(0,n.jsx)(r.code,{children:"hauler store add"})," commands allows you to change how an artifact is referenced ",(0,n.jsx)(r.strong,{children:"as it's added to the store"}),". Instead of storing the artifact with its original reference, you can specify a new registry, repository path, and tag."]}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Important:"})," The rewrite happens at add time. The artifact is pulled from the original reference but stored under the new reference you specify."]}),"\n",(0,n.jsx)(r.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,n.jsxs)(r.p,{children:["When you use ",(0,n.jsx)(r.code,{children:"--rewrite"}),", Hauler pulls the artifact from the original source but stores it with the rewritten reference. If you don't specify a particular component (registry or tag) in the rewrite, the original value is retained."]}),"\n",(0,n.jsx)(r.h2,{id:"usage",children:"Usage"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"# For images\nhauler store add image <image> --rewrite <new-reference>\n\n# For charts\nhauler store add chart <chart-name> --repo <chart-repository> --version <chart version> --rewrite <new-reference>\n"})}),"\n",(0,n.jsx)(r.h2,{id:"examples",children:"Examples"}),"\n",(0,n.jsx)(r.h3,{id:"example-1-rewrite-registry-and-repository",children:"Example 1: Rewrite Registry and Repository"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Original reference:"})," ",(0,n.jsx)(r.code,{children:"quay.io/prometheus/prometheus:v2.45.0"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"hauler store add image quay.io/prometheus/prometheus:v2.45.0 --rewrite internal.registry.io/production/monitoring/prometheus\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Stored as:"})," ",(0,n.jsx)(r.code,{children:"internal.registry.io/production/monitoring/prometheus:v2.45.0"})]}),"\n",(0,n.jsxs)(r.p,{children:["The original tag (",(0,n.jsx)(r.code,{children:"v2.45.0"}),") is preserved because a new one is not specified in the rewrite reference."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"example-2-rewrite-tag-only",children:"Example 2: Rewrite Tag Only"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Original reference:"})," ",(0,n.jsx)(r.code,{children:"gcr.io/my-project/api-server:v1.2.3"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"hauler store add image gcr.io/my-project/api-server:v1.2.3 --rewrite my-project/api-server:stable\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Stored as:"})," ",(0,n.jsx)(r.code,{children:"gcr.io/my-project/api-server:stable"})]}),"\n",(0,n.jsxs)(r.p,{children:["The registry (",(0,n.jsx)(r.code,{children:"gcr.io"}),") is preserved because a new one is not specified in the rewrite reference."]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h3,{id:"example-3-complete-rewrite",children:"Example 3: Complete Rewrite"}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Original reference:"})," ",(0,n.jsx)(r.code,{children:"docker.io/library/redis:7.0-alpine"})]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"hauler store add image docker.io/library/redis:7.0-alpine --rewrite harbor.local/apps/databases/redis:production\n"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Stored as:"})," ",(0,n.jsx)(r.code,{children:"harbor.local/apps/databases/redis:production"})]}),"\n",(0,n.jsx)(r.p,{children:"All components (registry, repository, tag) are changed in the rewrite reference."}),"\n",(0,n.jsx)(r.hr,{})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453(e,r,i){i.d(r,{R:()=>a,x:()=>o});var t=i(6540);const n={},s=t.createContext(n);function a(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);